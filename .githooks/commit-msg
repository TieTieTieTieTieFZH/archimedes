#!/bin/sh

# ç®€åŒ–çš„æäº¤ä¿¡æ¯éªŒè¯
# éªŒè¯æäº¤ä¿¡æ¯æ˜¯å¦åŒ…å«åŸºæœ¬ç±»å‹

commit_regex='^(feat|fix|docs|refactor|test): .+'

error_msg="âŒ æäº¤ä¿¡æ¯æ ¼å¼é”™è¯¯ï¼

æ­£ç¡®æ ¼å¼: <ç±»å‹>: <æè¿°>

ç±»å‹:
  feat:     æ–°åŠŸèƒ½
  fix:      ä¿®å¤bug
  docs:     æ–‡æ¡£æ›´æ–°
  refactor: ä»£ç é‡æ„
  test:     æµ‹è¯•ç›¸å…³

ç¤ºä¾‹:
  feat: æ·»åŠ å‘é‡æœç´¢åŠŸèƒ½
  fix: ä¿®å¤åˆ†é¡µå‚æ•°é—®é¢˜
  docs: æ›´æ–°READMEæ–‡æ¡£"

if ! grep -qE "$commit_regex" "$1"; then
    echo "$error_msg" >&2
    echo "ğŸ’¡ è·³è¿‡æ£€æŸ¥: git commit --no-verify"
    exit 1
fi

echo "âœ… æäº¤ä¿¡æ¯æ ¼å¼æ­£ç¡®"